# 目标
- 从指定接口拿到初始数据，然后进行分析，按要求输出结果。

# 要求
- 使用Python语言完成工程。

# 步骤
1. 从以下指定接口获取返回数据，json格式
```
https://eq.10jqka.com.cn/open/api/etf_rank/v1/selected.txt
```

2. json格式数据中，data.list字段是一个列表，其中每个元素是一个字典，包含以下字段：
```
code: 字符串类型，基金代码
market: 字符串类型，市场代码，
name: 字符串类型，基金名称
rate: 整数类型，加自选人数
```
给每个元素增加一个字段，collecting_time，值为当前时间，格式为：2024-05-13 10:00:00

3. 将数据写入到一个csv文件中，文件名为：etf_rank.csv，文件内容为：
```
数据日期,基金代码,基金名称,加自选人数,market,采集时间,采集渠道
```
其中，数据日期为当前日期，格式为：2024-05-13，采集渠道为：同花顺

4. 读取csv文件，按加自选人数降序排序，取前10条数据，输出到控制台，输出格式为：  
```
序号,基金代码,基金名称,加自选人数,market,采集时间
```
其中，序号从1开始，序号为整数类型，基金代码为字符串类型，基金名称为字符串类型，加自选人数为整数类型，market为字符串类型，采集时间为字符串类型，格式为：2024-05-13 10:00:00

5. 每次运行工程时，增量往csv文件中写入数据，不覆盖原有数据，数据日期为当前日期，格式为：2024-05-13，采集渠道为：同花顺

6. 增加一个输出采集日志的功能，单独写一个log文件，文件名为：etf_rank.log，文件内容为：
```
采集时间, 获取数据结果+数据条数, 获取失败+失败原因, 存表结果+数据条数, 存入表失败条数+失败原因
```

7. 增加一个对比功能-读取csv文件，读取同日期数据，
    - 当数据完全一致时，本次数据不存入csv，仅在log中记录：
    ```
    采集时间：本次采集数据与同日期数据完全一致，本次数据不存入csv，仅在log中记录：
    - 否则本次数据增量存入csv，并按原要求存数据与记录日志。



# 返回结果示例
{
    "data": {
        "list": [
            {
                "code": "159681",
                "market": "36",
                "name": "创50ETF",
                "rate": 212629
            },
            {
                "code": "563880",
                "market": "20",
                "name": "中证A500指数ETF",
                "rate": 206830
            },
            {
                "code": "159971",
                "market": "36",
                "name": "创业板ETF富国",
                "rate": 206518
            },
            {
                "code": "563220",
                "market": "20",
                "name": "中证A500ETF富国",
                "rate": 201880
            },
            {
                "code": "512020",
                "market": "20",
                "name": "A500ETF指数",
                "rate": 200806
            },
            {
                "code": "159201",
                "market": "36",
                "name": "自由现金流ETF",
                "rate": 189020
            },
            {
                "code": "510300",
                "market": "20",
                "name": "沪深300ETF",
                "rate": 83088
            },
            {
                "code": "513400",
                "market": "20",
                "name": "道琼斯ETF",
                "rate": 67709
            },
            {
                "code": "513260",
                "market": "20",
                "name": "恒生科技ETF基金",
                "rate": 66670
            },
            {
                "code": "518680",
                "market": "20",
                "name": "金ETF",
                "rate": 60381
            },
            {
                "code": "159915",
                "market": "36",
                "name": "创业板ETF",
                "rate": 55207
            },
            {
                "code": "562500",
                "market": "20",
                "name": "机器人ETF",
                "rate": 55180
            },
            {
                "code": "159928",
                "market": "36",
                "name": "消费ETF",
                "rate": 51925
            },
            {
                "code": "159825",
                "market": "36",
                "name": "农业ETF",
                "rate": 47650
            },
            {
                "code": "513870",
                "market": "20",
                "name": "纳指ETF富国",
                "rate": 47052
            },
            {
                "code": "588080",
                "market": "20",
                "name": "科创板50ETF",
                "rate": 46967
            },
            {
                "code": "511130",
                "market": "20",
                "name": "30年国债ETF博时",
                "rate": 45697
            },
            {
                "code": "159567",
                "market": "36",
                "name": "港股创新药ETF",
                "rate": 43985
            },
            {
                "code": "159890",
                "market": "36",
                "name": "云计算ETF",
                "rate": 43938
            },
            {
                "code": "518850",
                "market": "20",
                "name": "黄金ETF华夏",
                "rate": 43795
            },
            {
                "code": "159822",
                "market": "36",
                "name": "新经济ETF",
                "rate": 43502
            },
            {
                "code": "159813",
                "market": "36",
                "name": "半导体ETF",
                "rate": 43386
            },
            {
                "code": "159937",
                "market": "36",
                "name": "黄金ETF基金",
                "rate": 43199
            },
            {
                "code": "518880",
                "market": "20",
                "name": "黄金ETF",
                "rate": 42522
            },
            {
                "code": "513180",
                "market": "20",
                "name": "恒生科技指数ETF",
                "rate": 41128
            },
            {
                "code": "159698",
                "market": "36",
                "name": "粮食ETF",
                "rate": 40724
            },
            {
                "code": "159329",
                "market": "36",
                "name": "沙特ETF",
                "rate": 39400
            },
            {
                "code": "512710",
                "market": "20",
                "name": "军工龙头ETF",
                "rate": 39024
            },
            {
                "code": "159612",
                "market": "36",
                "name": "标普500ETF",
                "rate": 38871
            },
            {
                "code": "513300",
                "market": "20",
                "name": "纳斯达克ETF",
                "rate": 38581
            },
            {
                "code": "520580",
                "market": "20",
                "name": "新兴亚洲ETF",
                "rate": 35112
            },
            {
                "code": "159766",
                "market": "36",
                "name": "旅游ETF",
                "rate": 34384
            },
            {
                "code": "159941",
                "market": "36",
                "name": "纳指ETF",
                "rate": 34291
            },
            {
                "code": "510050",
                "market": "20",
                "name": "上证50ETF",
                "rate": 33627
            },
            {
                "code": "588760",
                "market": "20",
                "name": "人工智能ETF科创",
                "rate": 32546
            },
            {
                "code": "511090",
                "market": "20",
                "name": "30年国债ETF",
                "rate": 32538
            },
            {
                "code": "159751",
                "market": "36",
                "name": "港股科技ETF",
                "rate": 32505
            },
            {
                "code": "513050",
                "market": "20",
                "name": "中概互联网ETF",
                "rate": 32257
            },
            {
                "code": "513500",
                "market": "20",
                "name": "标普500ETF",
                "rate": 32003
            },
            {
                "code": "513010",
                "market": "20",
                "name": "恒生科技ETF易方达",
                "rate": 31916
            },
            {
                "code": "510210",
                "market": "20",
                "name": "上证指数ETF",
                "rate": 29794
            },
            {
                "code": "512690",
                "market": "20",
                "name": "酒ETF",
                "rate": 29295
            },
            {
                "code": "159792",
                "market": "36",
                "name": "港股通互联网ETF",
                "rate": 29282
            },
            {
                "code": "513030",
                "market": "20",
                "name": "德国ETF",
                "rate": 29246
            },
            {
                "code": "159570",
                "market": "36",
                "name": "港股通创新药ETF",
                "rate": 28942
            },
            {
                "code": "159509",
                "market": "36",
                "name": "纳指科技ETF",
                "rate": 28634
            },
            {
                "code": "513120",
                "market": "20",
                "name": "港股创新药ETF",
                "rate": 27510
            },
            {
                "code": "588200",
                "market": "20",
                "name": "科创芯片ETF",
                "rate": 27223
            },
            {
                "code": "513060",
                "market": "20",
                "name": "恒生医疗ETF",
                "rate": 27126
            },
            {
                "code": "159819",
                "market": "36",
                "name": "人工智能ETF",
                "rate": 27104
            },
            {
                "code": "512480",
                "market": "20",
                "name": "半导体ETF",
                "rate": 26680
            },
            {
                "code": "159506",
                "market": "36",
                "name": "恒生医疗ETF",
                "rate": 26116
            },
            {
                "code": "513600",
                "market": "20",
                "name": "恒生指数ETF",
                "rate": 25711
            },
            {
                "code": "513970",
                "market": "20",
                "name": "恒生消费ETF",
                "rate": 25663
            },
            {
                "code": "588790",
                "market": "20",
                "name": "科创AIETF",
                "rate": 24953
            },
            {
                "code": "512670",
                "market": "20",
                "name": "国防ETF",
                "rate": 24520
            },
            {
                "code": "588220",
                "market": "20",
                "name": "科创100ETF基金",
                "rate": 24378
            },
            {
                "code": "159393",
                "market": "36",
                "name": "沪深300指数ETF",
                "rate": 23867
            },
            {
                "code": "520830",
                "market": "20",
                "name": "沙特ETF",
                "rate": 23764
            },
            {
                "code": "513100",
                "market": "20",
                "name": "纳指ETF",
                "rate": 22875
            },
            {
                "code": "159985",
                "market": "36",
                "name": "豆粕ETF",
                "rate": 22630
            },
            {
                "code": "513090",
                "market": "20",
                "name": "香港证券ETF",
                "rate": 22151
            },
            {
                "code": "159682",
                "market": "36",
                "name": "创业50ETF",
                "rate": 21713
            },
            {
                "code": "588870",
                "market": "20",
                "name": "科创50指数ETF",
                "rate": 21594
            },
            {
                "code": "513390",
                "market": "20",
                "name": "纳指100ETF",
                "rate": 21518
            },
            {
                "code": "515650",
                "market": "20",
                "name": "消费50ETF",
                "rate": 21259
            },
            {
                "code": "513780",
                "market": "20",
                "name": "港股创新药50ETF",
                "rate": 21219
            },
            {
                "code": "516640",
                "market": "20",
                "name": "芯片龙头ETF",
                "rate": 21101
            },
            {
                "code": "159529",
                "market": "36",
                "name": "标普消费ETF",
                "rate": 21065
            },
            {
                "code": "159559",
                "market": "36",
                "name": "机器人50ETF",
                "rate": 20979
            },
            {
                "code": "510310",
                "market": "20",
                "name": "沪深300ETF易方达",
                "rate": 20565
            },
            {
                "code": "513350",
                "market": "20",
                "name": "标普油气ETF",
                "rate": 20547
            },
            {
                "code": "513330",
                "market": "20",
                "name": "恒生互联网ETF",
                "rate": 20533
            },
            {
                "code": "512100",
                "market": "20",
                "name": "中证1000ETF",
                "rate": 20484
            },
            {
                "code": "159892",
                "market": "36",
                "name": "恒生医药ETF",
                "rate": 20475
            },
            {
                "code": "588750",
                "market": "20",
                "name": "科创芯片50ETF",
                "rate": 19754
            },
            {
                "code": "159399",
                "market": "36",
                "name": "现金流ETF",
                "rate": 19678
            },
            {
                "code": "510500",
                "market": "20",
                "name": "中证500ETF",
                "rate": 19278
            },
            {
                "code": "512010",
                "market": "20",
                "name": "医药ETF",
                "rate": 19045
            },
            {
                "code": "159934",
                "market": "36",
                "name": "黄金ETF",
                "rate": 18943
            },
            {
                "code": "159740",
                "market": "36",
                "name": "恒生科技ETF",
                "rate": 18857
            },
            {
                "code": "159300",
                "market": "36",
                "name": "300ETF",
                "rate": 18659
            },
            {
                "code": "518600",
                "market": "20",
                "name": "上海金ETF",
                "rate": 18644
            },
            {
                "code": "512760",
                "market": "20",
                "name": "芯片ETF",
                "rate": 18562
            },
            {
                "code": "515070",
                "market": "20",
                "name": "人工智能AIETF",
                "rate": 18482
            },
            {
                "code": "512880",
                "market": "20",
                "name": "证券ETF",
                "rate": 18475
            },
            {
                "code": "513520",
                "market": "20",
                "name": "日经ETF",
                "rate": 18319
            },
            {
                "code": "512660",
                "market": "20",
                "name": "军工ETF",
                "rate": 17535
            },
            {
                "code": "159866",
                "market": "36",
                "name": "日经ETF",
                "rate": 16965
            },
            {
                "code": "159518",
                "market": "36",
                "name": "标普油气ETF",
                "rate": 16838
            },
            {
                "code": "159919",
                "market": "36",
                "name": "沪深300ETF",
                "rate": 16693
            },
            {
                "code": "159992",
                "market": "36",
                "name": "创新药ETF",
                "rate": 16454
            },
            {
                "code": "561560",
                "market": "20",
                "name": "电力ETF",
                "rate": 16034
            },
            {
                "code": "159699",
                "market": "36",
                "name": "恒生消费ETF",
                "rate": 16008
            },
            {
                "code": "159867",
                "market": "36",
                "name": "畜牧ETF",
                "rate": 15909
            },
            {
                "code": "588730",
                "market": "20",
                "name": "科创人工智能ETF",
                "rate": 15558
            },
            {
                "code": "159841",
                "market": "36",
                "name": "证券ETF",
                "rate": 15471
            },
            {
                "code": "510880",
                "market": "20",
                "name": "红利ETF",
                "rate": 15262
            },
            {
                "code": "513770",
                "market": "20",
                "name": "港股互联网ETF",
                "rate": 15141
            },
            {
                "code": "515220",
                "market": "20",
                "name": "煤炭ETF",
                "rate": 15020
            }
        ]
    },
    "status_code": 0,
    "status_msg": "success"
}
